extends ../layouts/default

block content
	if user
		.row.links-container.negative-margin-top: .col
			a#profile-save.waves-effect.waves-light.btn.red.darken-4(href="/profile/edit")
				i.mdi-editor-mode-edit.left
				| Edit profile

		.row
			.col.s12.m8.l9
				.row.first-profile-row
					.col.s12.m4.l3: .section
						img.profile-image(src= user.image)
					.col.s12.m8.l9: .section
						h5= user.username
						p Member since #{user.registered}.

				.divider
				
				.row
					.col.s12: .section
						- var progressionPercentage = ((user.wardrobe.length / allSkins.length) * 100).toFixed(1) + "%";
						
						h5 Wardrobe Progression (#{progressionPercentage})
						
						.progress.red.lighten-5
							.determinate.red(style={width: progressionPercentage})
						
						p You have 
							strong #{user.wardrobe.length} 
							| skins in your wardrobe, leaving you with 
							strong #{allSkins.length - user.wardrobe.length} 
							| more skins to collect!
				
				.divider
				
				.row
					.col.s12: .section
						h5 About
						if (user.about)
							p= user.about
						else
							p.grey-text You have not yet added any information about yourself.

			.col.s12.m4.l3
				h5 Response from v2/account
				if tokenResponse
					each val, key in tokenResponse
						if typeof(val) == "object"
							p: strong #{key}:
							ul
								each subval in val
									li= subval
						else
							p
								strong= key
								| : #{val}
				else
					p No API Token added to profile
				
				.divider
				
				h5 Response from v2/characters
				if characters
					each val, key in characters
						if typeof(val) == "object"
							p: strong #{key}:
							ul
								each subval in val
									li= subval
						else
							p
								strong= key
								| : #{val}
				else
					p No API Token added to profile
				
				.divider
				
				h5 Response from v2/commerce/transactions
				if transactions
					each val, key in transactions
						if typeof(val) == "object"
							p: strong #{key}:
							ul
								each subval in val
									li= subval
						else
							p
								strong= key
								| : #{val}
				else
					p No API Token added to profile
				
	else
		.row: .col.s12
			p You need to have a user and to be logged in to see your profile.