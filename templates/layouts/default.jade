include ../mixins/flash-messages

mixin menuitems
	li.logo
		a#logo-container(href="/")
			img(src="/images/logo.png")
	
	li.divider
	
	each link in navLinks
		if link.subitems
			li
				ul.collapsible.collapsible-accordion
					li
						a.collapsible-header.waves-effect.waves-red= link.label
						div.collapsible-body
							ul
								each subitem in link.subitems
									li(class=(section == subitem.key ? 'active' : null))
										a(href=subitem.href)= subitem.label
		else
			li(class=(section == link.key ? 'active' : null))
				a.waves-effect.waves-red(href=link.href)= link.label
	
	li.divider
	
	if user
		li(class=(section == "profile" ? 'active' : null))
			a(href='/profile') Your profile
		li: a(href='/keystone/signout') Sign Out
		
		if user.canAccessKeystone
			li.divider
			li: a.waves-effect.waves-red(href='/keystone') Admin
	else
		li: a.waves-effect.waves-red(href='/keystone/signin') Admin

mixin itemcard(item)
	.col.s2
		.card
			.card-image.waves-effect.waves-block.waves-light
				img.activator(src= item.icon)
			.card-content
				span.card-title.activator.grey-text.text-darken-4= item.name
					i.mdi-navigation-more-vert.right
				p Testing
			.card-reveal
				span.card-title.grey-text.text-darken-4= item.name
					i.mdi-navigation-close.right
				p Here is some more information about this product that is only revealed once clicked on.

mixin item(item)
	.skin-item.waves-effect.waves-light.z-depth-1
		a(href='/skin/#{item.skinid}')
			.skin-item-image-container
				img(src= item.icon)


doctype html
html

	//- HTML HEADER
	head
		meta(charset="utf-8")
		meta(name="viewport", content="width=device-width, initial-scale=1.0")
		meta(http-equiv="X-UA-Compatible" content="IE=edge")

		title= title
		
		//- Favicons
		link(rel="shortcut icon", href="/favicon.ico", type="image/x-icon")
		link(rel="apple-touch-icon", sizes="57x57", href="/apple-touch-icon-57x57.png")

		link(rel="apple-touch-icon", sizes="60x60", href="/apple-touch-icon-60x60.png")
		link(rel="apple-touch-icon", sizes="72x72", href="/apple-touch-icon-72x72.png")
		link(rel="apple-touch-icon", sizes="76x76", href="/apple-touch-icon-76x76.png")
		link(rel="apple-touch-icon", sizes="114x114", href="/apple-touch-icon-114x114.png")
		link(rel="apple-touch-icon", sizes="120x120", href="/apple-touch-icon-120x120.png")
		link(rel="apple-touch-icon", sizes="144x144", href="/apple-touch-icon-144x144.png")
		link(rel="apple-touch-icon", sizes="152x152", href="/apple-touch-icon-152x152.png")
		link(rel="apple-touch-icon", sizes="180x180", href="/apple-touch-icon-180x180.png")
		
		link(rel="icon", type="image/png", href="/favicon-32x32.png", sizes="32x32")
		link(rel="icon", type="image/png", href="/favicon-194x194.png", sizes="194x194")
		link(rel="icon", type="image/png", href="/favicon-96x96.png", sizes="96x96")
		link(rel="icon", type="image/png", href="/android-chrome-192x192.png", sizes="192x192")
		link(rel="icon", type="image/png", href="/favicon-16x16.png", sizes="16x16")
		
		link(rel="manifest", href="/manifest.json")
		meta(name="msapplication-TileColor", content="#ffffff")
		meta(name="msapplication-TileImage", content="/mstile-144x144.png")
		meta(name="theme-color", content="#ffffff")
		
		

		//- Customise the stylesheet for your site by editing /public/styles/site.sass
		link(href="/styles/site.css", rel="stylesheet")

		//- This file provides the default styling for the KeystoneJS Content Editor
		if user && user.canAccessKeystone
			link(href="/keystone/styles/content/editor.min.css", rel="stylesheet")

		//- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries
		//- Safely remove this block if you are not targeting IE8
		//-[if lt IE 9]
			script(src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js")
			script(src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js")
		//-[endif]

		//- Include template-specific stylesheets by extending the css block
		block css

		//- Add any other template-specific HEAD tags by extending the head block
		block head

	//- HTML BODY
	body
		.page-wrap

			//- HEADER
			header
				nav(role="navigation")
					.nav-wrapper
						a#sidenav-collapse.hide-on-large-only(href="#", data-activates="slide-out")
							i.mdi-navigation-menu
						a.page-title= (headerTitle) ? headerTitle : title
						//form.right
							.input-field.hide-on-small-only.m4.l3
								input#search(type="text")
								label(for="search")
									i.mdi-action-search
					ul#slide-out.side-nav.fixed
						+menuitems
					


			//- BODY
			#body

				//- NOTE:
				//- There is no .container wrapping class around body blocks to allow more flexibility in design.
				//- Remember to include it in your templates when you override the intro and content blocks!

				//- The Intro block appears above flash messages (used for temporary information display)
				block intro

				//- Flash messages allow you to display once-off status messages to users, e.g. form
				//- validation errors, success messages, etc.
				+flash-messages(messages)

				//- The content block should contain the body of your template's content
				block content


		//- FOOTER
		footer.page-footer
			.row
				.col.l6.s12
					h5.white-text Footer Content
					p.grey-text.text-lighten-4 You can use rows and columns here to organize your footer content.
				.col.l4.offset-l2.s12
					h5.white-text Links
					ul
						li: a.grey-text.text-lighten-3(href="#") Link
						li: a.grey-text.text-lighten-3(href="#") Link
						li: a.grey-text.text-lighten-3(href="#") Link
			.footer-copyright
				.row
					#footer-logo-wrapper.valign-wrapper.col.s12.m12.l3
						img.valign.footer-logo(src="/images/logo-white.png")
					#footer-content-wrapper.col.s12.m12.l9
						p Guild Wars 2 Wardrobe is a non-profit fan-made site for Guild Wars 2. Our aim is to create the best resource of information for skins in the game. Guild Wars 2 Wardrobe is in no way associated with ArenaNet, NCSOFT Corporation or the Guild Wars 2 trademark.
						p ©2010–2015 ArenaNet, LLC. All rights reserved. Guild Wars, Guild Wars 2, Guild Wars 2: Heart of Thorns, ArenaNet, NCSOFT, the Interlocking NC Logo, and all associated logos and designs are trademarks or registered trademarks of NCSOFT Corporation. All other trademarks are the property of their respective owners.
						p ©2015 Christian Grimsgaard

			


		//- JAVASCRIPT

		//- jQuery 1.11.1 is included by default, and required by both Bootstrap
		//- and the KeystoneJS Content Editor. If you are not targeting IE8,
		//- you can upgrade to 2.1.1 (also bundled) for better performance.
		script(src='/js/lib/jquery/jquery-1.11.1.min.js')

		//- Customise which Bootstrap javascript files are served by including
		//- them specifically here, instead of bootstrap-3.2.0.min.js
		// Commented out Bootstrap as we don't need them for now
		// script(src='/js/lib/bootstrap/bootstrap-3.2.0.min.js')

		//- The KeystoneJS Content Editor provides support for ks-editable data attributes,
		//- which generate links to edit content for users who can access Keystone
		if user && user.canAccessKeystone
			script(src='/keystone/js/content/editor.js')

		//- Add scripts that are globally required by your site here.
		script(src='/js/lib/materialize/materialize.min.js')
		script(src='/js/script.js')
		
		//- Include template-specific javascript files by extending the js block
		block js
